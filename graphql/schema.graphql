scalar Upload @scalar(class: "Nuwave\\Lighthouse\\Schema\\Types\\Scalars\\Upload")

# -- MUTATIONS --

type Mutation {
  # Admin Auth
  adminLogin(input: LoginInput! @spread): AdminAuthPayload! 
    @field(resolver: "AdminResolver@login")

  # User Auth
  createUser(input: CreateUserInput! @spread): UserPayload!
    @field(resolver: "UserResolver@create")
  userLogin(input: LoginInput! @spread): UserPayload! 
    @field(resolver: "UserResolver@login")
  userSocialLogin(input: SocialLoginInput! @spread): UserPayload! 
    @field(resolver: "UserResolver@socialLogin")
  forgotPassword(input: ForgotPasswordInput! @spread): DefaultResponse 
    @field(resolver: "ForgotPasswordResolver")
  updateForgottenPassword(input: NewPasswordWithCodeInput @spread): DefaultResponse 
    @field(resolver: "ResetPasswordResolver")

  # Driver Auth
  createDriver(input: CreateDriverInput! @spread): Driver 
    @field(resolver: "DriverResolver@create")
  driverLogin(input: LoginInput! @spread): DriverAuthPayload! 
    @field(resolver: "DriverResolver@login")

  # Partner Auth
  partnerLogin(input: LoginInput! @spread): PartnerAuthPayload! 
    @field(resolver: "PartnerResolver@login")
}

# Admin Guard
extend type Mutation @guard(with: ["admin"]) {
  # Fleet
  createFleet(input: CreateFleetInput! @spread): Fleet
    @field(resolver: "FleetResolver@create")
  updateFleet(input: UpdateFleetInput! @spread): Fleet 
    @field(resolver: "FleetResolver@update")
  deleteFleet(id: ID!): Fleet @delete

  # Admin
  createAdmin(input: CreateAdminInput! @spread): Admin
    @field(resolver: "AdminResolver@create")
  updateAdmin(input: UpdateAdminInput! @spread): Admin 
    @field(resolver: "AdminResolver@update")
  changeAdminPassword(input: ChangePasswordInput @spread): String 
    @field(resolver: "AdminResolver@updatePassword")
  deleteAdmin(id: ID!): Admin @delete

  # Role Type
  createRole(input: CreateRoleInput! @spread): Role @create
  updateRole(input: UpdateRoleInput! @spread): Role 
    @field(resolver: "RoleResolver@update")
  deleteRole(id: ID!): Role @delete

  # Statement
  createStatement(input: CreateStatementInput! @spread): Statement @create
  updateStatement(input: UpdateStatementInput! @spread): Statement @update
  deleteStatement(id: ID!): Statement @delete

  # Car Make
  createCarMake(input: CreateCarMakeInput! @spread): CarMake @create
  updateCarMake(input: UpdateCarMakeInput! @spread): CarMake @update
  deleteCarMake(id: ID!): CarMake @delete

  # Car Model
  createCarModel(input: CreateCarModelInput! @spread): CarModel 
    @field(resolver: "CarModelResolver@create")
  updateCarModel(input: UpdateCarModelInput! @spread): CarModel
    @field(resolver: "CarModelResolver@update")
  deleteCarModel(id: ID!): CarModel @delete

  # Car Type
  createCarType(input: CreateCarTypeInput! @spread): CarType
    @field(resolver: "CarTypeResolver@create")
  updateCarType(input: UpdateCarTypeInput! @spread): CarType 
    @field(resolver: "CarTypeResolver@update")
  deleteCarType(id: ID!): CarType @delete

  # Partner
  createPartner(input: CreatePartnerInput! @spread): Partner
    @field(resolver: "PartnerResolver@create")
  deletePartner(id: ID!): Partner @delete

  # Partner User
  createPartnerUser(input: PartnerUserInput! @spread): DefaultResponse
    @field(resolver: "PartnerResolver@assignUser")
  deletePartnerUser(input: PartnerUserInput! @spread): DefaultResponse
    @field(resolver: "PartnerResolver@unassignUser")

  # Partner Driver
  createPartnerDriver(input: PartnerDriverInput! @spread): DefaultResponse
    @field(resolver: "PartnerResolver@assignDriver")
  deletePartnerDriver(input: PartnerDriverInput! @spread): DefaultResponse
    @field(resolver: "PartnerResolver@unassignDriver")

  # Business Trip Request
  createBusinessTripFromRequest(input: CreateBusinessTripFromRequestInput! @spread): Boolean 
    @field(resolver: "BusinessTripRequestResolver@createTrip")
  addRequestToBusinessTrip(input: AddRequestToBusinessTripInput! @spread): Boolean 
    @field(resolver: "BusinessTripRequestResolver@addToTrip")

  # Zone
  createZone(input: CreateZoneInput! @spread): Zone 
    @create
  updateZone(input: UpdateZoneInput! @spread): Zone 
    @update
  deleteZone(id: ID!): Zone @delete

  # School
  updateSchool(input: UpdateSchoolInput! @spread): School 
    @update
  deleteSchool(id: ID!): School @delete

  # Workplace
  updateWorkplace(input: UpdateWorkplaceInput! @spread): Workplace 
    @update
  deleteWorkplace(id: ID!): Workplace @delete

  # School Grade
  createSchoolGrade(input: CreateSchoolGradeInput! @spread): SchoolGrade 
    @create
  updateSchoolGrade(input: UpdateSchoolGradeInput! @spread): SchoolGrade 
    @update
  deleteSchoolGrade(id: ID!): SchoolGrade @delete

  # City
  createCity(input: CreateCityInput! @spread): City @create
  updateCity(input: UpdateCityInput! @spread): City @update
  deleteCity(id: ID!): City @delete

  # Reorder
  reorder(input: UpdateOrderInput! @spread): Boolean 
    @field(resolver: "ReorderResolver")

  # Terminal
  createTerminal(input: CreateTerminalInput! @spread): Terminal @create
  updateTerminal(input: UpdateTerminalInput! @spread): Terminal @update
  deleteTerminal(id: ID!): Terminal @delete
} 

# Admin|Partner Guard
extend type Mutation @guard(with: ["admin", "partner"]) {
  # User
  createMultipleUsers(input: CreateMultipleUsersInput! @spread): Boolean 
    @field(resolver: "UserResolver@createMultipleUsers")
  deleteUser(id: [ID!]!): Boolean
    @field(resolver: "UserResolver@destroy")

  # Partner
  changePartnerPassword(input: ChangePasswordInput @spread): String 
    @field(resolver: "PartnerResolver@updatePassword")
  updatePartner(input: UpdatePartnerInput! @spread): Partner 
    @field(resolver: "PartnerResolver@update")

  # Vehicle
  createVehicle(input: CreateVehicleInput! @spread): Vehicle 
    @field(resolver: "VehicleResolver@create")
  updateVehicle(input: UpdateVehicleInput! @spread): Vehicle 
    @field(resolver: "VehicleResolver@update")
  deleteVehicle(id: ID!): Vehicle @delete

  # Driver
  deleteDriver(id: [ID!]!): Boolean
    @field(resolver: "DriverResolver@destroy")

  # Driver Vehicle
  createDriverVehicle(input: DriverVehicleInput! @spread): DefaultResponse! 
    @field(resolver: "DriverResolver@assignVehicle")
  deleteDriverVehicle(input: DriverVehicleInput! @spread): DefaultResponse! 
    @field(resolver: "DriverResolver@unassignVehicle")

  # Business Trip
  createBusinessTrip(input: CreateBusinessTripInput! @spread): BusinessTrip 
    @field(resolver: "BusinessTripResolver@create")
  copyBusinessTrip(input: CopyBusinessTripInput! @spread): BusinessTrip 
    @field(resolver: "BusinessTripResolver@copy")
  updateBusinessTrip(input: UpdateBusinessTripInput! @spread): BusinessTrip
    @field(resolver: "BusinessTripResolver@update")
  updateBusinessTripRoute(input: UpdateTripRouteInput! @spread): BusinessTrip 
    @field(resolver: "BusinessTripResolver@updateRoute")
  deleteBusinessTrip(id: ID!): BusinessTrip @delete

  # Business Trip Transaction
  deleteBusinessTripAppTransaction(id: [ID!]!): Boolean
    @field(resolver: "BusinessTripAppTransactionResolver@destroy")

  # Business Trip Station
  updateBusinessTripStation(input: UpdateBusinessTripStationInput! @spread): 
    BusinessTripStation @update
  deleteBusinessTripStation(id: ID!): BusinessTripStation 
    @field(resolver: "BusinessTripStationResolver@destroy") 
  acceptBusinessTripStation(input: AcceptBusinessTripStationInput! @spread): BusinessTripStation
    @field(resolver: "BusinessTripStationResolver@acceptStation") 

  # Business Trip Subscription
  inviteBusinessTripUser(input: InviteBusinessTripUserInput! @spread): Boolean 
    @field(resolver: "BusinessTripResolver@inviteUser")
  createBusinessTripSubscription(input: CreateBusinessTripSubscriptionInput! @spread): Boolean 
    @field(resolver: "BusinessTripResolver@createSubscription")

  # Business Trip Event
  deleteBusinessTripEvent(log_id: [String!]!): Boolean
    @field(resolver: "BusinessTripEventResolver@destroy")

  # Seats Trip Event
  deleteSeatsTripEvent(log_id: [String!]!): Boolean
    @field(resolver: "SeatsTripEventResolver@destroy")

  # Communication
  sendDirectMessage(input: SendDirectMessageInput! @spread): String
    @field(resolver: "CommunicationResolver@sendDirectMessage")

  # Seats Trip
  createSeatsTrip(input: CreateSeatsTripInput! @spread): SeatsTrip 
    @field(resolver: "SeatsTripResolver@create")
  copySeatsTrip(input: CopySeatsTripInput! @spread): SeatsTrip 
    @field(resolver: "SeatsTripResolver@copy")
  updateSeatsTrip(input: UpdateSeatsTripInput! @spread): SeatsTrip
    @field(resolver: "SeatsTripResolver@update")
  deleteSeatsTrip(id: ID!): SeatsTrip @delete

  # Seats Lines
  createSeatsLine(input: CreateSeatsLineInput! @spread): SeatsLine @create
  copySeatsLine(input: CopySeatsTripInput! @spread): SeatsLine 
    @field(resolver: "SeatsLineResolver@copy")
  updateSeatsLine(input: UpdateSeatsLineInput! @spread): SeatsLine @update
  updateSeatsLineRoute(input: UpdateLineRouteInput! @spread): SeatsLine 
    @field(resolver: "SeatsLineResolver@updateRoute")
  deleteSeatsLine(id: ID!): SeatsLine @delete

  # Seats Trip Station
  createSeatsLineStation(input: CreateSeatsLineStationInput! @spread): SeatsLineStation @create
  updateSeatsLineStation(input: UpdateSeatsLineStationInput! @spread): SeatsLineStation @update
  deleteSeatsLineStation(id: ID!): SeatsLineStation @delete

  # Seats Trip Booking
  deleteSeatsTripBooking(id: [ID!]!): Boolean
    @field(resolver: "SeatsTripBookingResolver@destroy")

  # Seats Trip Transaction
  deleteSeatsTripAppTransaction(id: [ID!]!): Boolean
    @field(resolver: "SeatsTripAppTransactionResolver@destroy")

  # Document
  uploadDocument(input: UploadDocumentInput @spread): Document
    @field(resolver: "DocumentResolver@create")
  deleteDocument(id: ID!): String
    @field(resolver: "DocumentResolver@delete")
  updateDocument(input: UpdateDocumentInput! @spread): Document @update

  # Supervisor
  createSupervisor(input: CreateSupervisorInput! @spread): Supervisor
    @field(resolver: "SupervisorResolver@create")
  updateSupervisor(input: UpdateSupervisorInput! @spread): Supervisor
    @field(resolver: "SupervisorResolver@update")
  deleteSupervisor(id: ID!): Supervisor @delete

  # Promo Code
  createPromoCode(input: CreatePromoCodeInput! @spread): PromoCode @create
  updatePromoCode(input: UpdatePromoCodeInput! @spread): PromoCode @update
  deletePromoCode(id: ID!): PromoCode @delete

  # Price Package
  createPricePackage(input: CreatePricePackageInput! @spread): PricePackage 
    @field(resolver: "PricePackageResolver@create")
  updatePricePackage(input: UpdatePricePackageInput! @spread): PricePackage 
    @field(resolver: "PricePackageResolver@update")
  deletePricePackage(id: ID!): PricePackage @delete
}

# Admin|User Guard
extend type Mutation @guard(with: ["admin", "user"]) {
  # User
  userPhoneVerification(input: UserPhoneVerificationInput! @spread): UserPhoneVerifyPayload!
    @field(resolver: "UserResolver@phoneVerification")
  changeUserPassword(input: ChangePasswordInput @spread): DefaultResponse 
    @field(resolver: "UserResolver@updatePassword")

  # Business Trip Event
  changeBusinessTripPickupStatus(input: ChangeBusinessTripPickupStatusInput! @spread): Boolean
    @field(resolver: "BusinessTripEventResolver@changePickupStatus")

  # Business Trip Transaction
  createBusinessTripAppTransaction(input: CreateBusinessTripAppTransactionInput! @spread): BusinessTripAppTransaction
    @field(resolver: "BusinessTripAppTransactionResolver@create")

  # Ondemand Request 
  createOndemandRequest(input: CreateOndemandRequestInput! @spread): OndemandRequest 
    @field(resolver: "OndemandRequestResolver@create")
  updateOndemandRequest(input: UpdateOndemandRequestInput! @spread): OndemandRequest
    @field(resolver: "OndemandRequestResolver@update")
  deleteOndemandRequest(id: [ID!]!): Boolean
    @field(resolver: "OndemandRequestResolver@destroy")

  # Qruz To School
  createSchool(input: CreateSchoolInput! @spread): School
    @create
  createSchoolRequest(input: CreateSchoolRequestInput! @spread): SchoolRequest 
    @field(resolver: "SchoolRequestResolver@create")
  updateSchoolRequest(input: UpdateSchoolRequestInput! @spread): SchoolRequest 
    @field(resolver: "SchoolRequestResolver@update")
  deleteSchoolRequest(id: [ID!]!): String
    @field(resolver: "SchoolRequestResolver@destroy")
  changeSchoolRequestStatus(input: ChangeSchoolRequestStatusInput! @spread): String
    @field(resolver: "SchoolRequestResolver@changeStatus")

  # Qruz To Work
  createWorkplace(input: CreateWorkplaceInput! @spread): Workplace 
    @create
  createWorkRequest(input: CreateWorkRequestInput! @spread): WorkRequest 
    @field(resolver: "WorkRequestResolver@create")
  updateWorkRequest(input: UpdateWorkRequestInput! @spread): WorkRequest 
    @field(resolver: "WorkRequestResolver@update")
  deleteWorkRequest(id: [ID!]!): String
    @field(resolver: "WorkRequestResolver@destroy")
  changeWorkRequestStatus(input: ChangeWorkRequestStatusInput! @spread): String
    @field(resolver: "WorkRequestResolver@changeStatus")

  # Seats Trip Booking
  createSeatsTripBooking(input: CreateSeatsTripBookingInput! @spread): SeatsTripBooking
    @field(resolver: "SeatsTripBookingResolver@create")
  
  # Seats Trip Transaction
  createSeatsTripAppTransaction(input: CreateSeatsTripAppTransactionInput! @spread): Boolean
    @field(resolver: "SeatsTripAppTransactionResolver@create")
}

# Admin|Driver Guard
extend type Mutation @guard(with: ["admin", "driver"]) {
  # Driver
  changeDriverPassword(input: ChangePasswordInput @spread): DefaultResponse 
    @field(resolver: "DriverResolver@updatePassword")

  # Business Trip Event
  readyBusinessTrip(input: ReadyTripInput! @spread): BusinessTrip
    @field(resolver: "BusinessTripEventResolver@ready")
  startBusinessTrip(input: StartTripInput! @spread): BusinessTrip 
    @field(resolver: "BusinessTripEventResolver@start")
  endBusinessTrip(input: EndTripInput! @spread): Boolean
    @field(resolver: "BusinessTripEventResolver@end")
  updateBusinessTripDriverLocation(input: UpdateTripDriverLocationInput! @spread): Boolean 
    @field(resolver: "BusinessTripEventResolver@updateDriverLocation")
  atBusinessTripStation(input: AtTripStationInput! @spread): Boolean
    @field(resolver: "BusinessTripEventResolver@atStation")
  pickBusinessTripUsers(input: SelectBusinessTripUsersInput! @spread): Boolean
    @field(resolver: "BusinessTripEventResolver@pickUsers")
  dropBusinessTripUsers(input: SelectBusinessTripUsersInput! @spread): Boolean
    @field(resolver: "BusinessTripEventResolver@dropUsers")

  # Seats Trip Event
  readySeatsTrip(input: ReadyTripInput! @spread): SeatsTrip
    @field(resolver: "SeatsTripEventResolver@ready")
  startSeatsTrip(input: StartTripInput! @spread): SeatsTrip 
    @field(resolver: "SeatsTripEventResolver@start")
  endSeatsTrip(input: EndTripInput! @spread): Boolean
    @field(resolver: "SeatsTripEventResolver@end")
  updateSeatsTripDriverLocation(input: UpdateTripDriverLocationInput! @spread): Boolean 
    @field(resolver: "SeatsTripEventResolver@updateDriverLocation")
  atSeatsTripStation(input: AtTripStationInput! @spread): Boolean 
    @field(resolver: "SeatsTripEventResolver@atStation")
  pickSeatsTripUser(input: PickSeatsTripUserInput! @spread): Boolean 
    @field(resolver: "SeatsTripEventResolver@pickUser")
  dropSeatsTripUser(input: DropSeatsTripUserInput! @spread): Boolean 
    @field(resolver: "SeatsTripEventResolver@dropUser")
}

# Admin|Partner|User Guard
extend type Mutation @guard(with: ["admin", "partner", "user"]) {
  # User
  updateUser(input: UpdateUserInput! @spread): User 
    @field(resolver: "UserResolver@update")

  # Business Trip Station
  createBusinessTripStation(input: CreateBusinessTripStationInput! @spread): 
    BusinessTripStation @create

  # Business Trip User
  confirmBusinessTripSubscription(input: ConfirmBusinessTripSubscriptionInput! @spread): BusinessTrip
    @field(resolver: "BusinessTripResolver@confirmSubscription")
  deleteBusinessTripSubscription(input: DeleteBusinessTripSubscriptionInput! @spread): Boolean
    @field(resolver: "BusinessTripResolver@deleteSubscription")
  verifyBusinessTripSubscription(input: VerifyBusinessTripSubscriptionInput! @spread): Boolean
    @field(resolver: "BusinessTripResolver@verifySubscription")

  # Business Trip User Station
  assignBusinessTripStationUser(input: AssignBusinessTripStationUserInput! @spread): 
    Boolean @field(resolver: "BusinessTripStationResolver@assignUser")

  # Business Trip Schedule
  rescheduleUserBusinessTrip(input: BusinessTripScheduleInput! @spread): Boolean
    @field(resolver: "BusinessTripScheduleResolver@reschedule")

  # User Transaction
  createUserTransaction(input: CreateUserTransactionInput! @spread): UserTransaction
    @field(resolver: "UserTransactionResolver@create")
  
  # Promo codes
  applyPromoCode(name: String!, user_id: ID!): PromoCode
    @field(resolver: "PromoCodeResolver@apply")
}

# Admin|Partner|Driver Guard
extend type Mutation @guard(with: ["admin", "partner", "driver"]) {
  # Driver
  updateDriver(input: UpdateDriverInput! @spread): Driver
    @field(resolver: "DriverResolver@update")
}

# Admin|Partner|User|Driver Guard
extend type Mutation @guard(with: ["admin", "partner", "user", "driver"]) {
  # Communication
  sendBusinessTripChatMessage(input: SendBusinessTripChatMessageInput! @spread): BusinessTripChat
    @field(resolver: "CommunicationResolver@sendBusinessTripChatMessage")

  # Business Trip Attendance
  createBusinessTripAttendance(input: CreateBusinessTripAttendanceInput! @spread): Boolean
    @field(resolver: "BusinessTripAttendanceResolver@create")

  # Business Trip Event
  changeBusinessTripAttendanceStatus(input: ChangeBusinessTripAttendanceStatusInput! @spread): Boolean
    @field(resolver: "BusinessTripEventResolver@changeAttendanceStatus")
  
  # Seats
  updateSeatsTripBooking(input: UpdateSeatsTripBookingInput! @spread): SeatsTripBooking
    @field(resolver: "SeatsTripBookingResolver@update")
}

# User Guard
extend type Mutation @guard(with: ["user"]) {
  # Business Trip Rating
  updateBusinessTripRating(input: UpdateBusinessTripRatingInput! @spread): BusinessTripRating
    @field(resolver: "BusinessTripRatingResolver@update")

  # Seats Trip Rating
  updateSeatsTripRating(input: UpdateSeatsTripRatingInput! @spread): SeatsTripRating
    @field(resolver: "SeatsTripRatingResolver@update")
}

# -- QUERIES --

# Admin Guard
type Query @guard(with: ["admin"]) {
  # Authenticated Admin
  authAdmin: Admin @auth

  # Admin
  admins: [Admin] @all
  admin(id: ID @eq): Admin @find 

  # User
  users(searchFor: String, searchQuery: String): [User] 
    @paginate(scopes: ["search"])

  # Driver
  drivers(fleet_id: ID, searchFor: String, searchQuery: String): [Driver] 
    @paginate(scopes: ["fleet", "search"])

  # Fleet
  fleets: [Fleet] @all
  fleet(id: ID @eq): Fleet @findOrFail

  # Role
  roles: [Role] @all
  role(id: ID @eq): Role @find

  # Statement
  statements: [Statement] @all

  # Ondemand Request
  ondemandRequests(status: String, period: String, searchFor: String, searchQuery: String): [OndemandRequest]
    @paginate(scopes: ["filter", "search"]) @softDeletes
  ondemandRequestsStats(status: String period: String): OndemandRequestStats
    @field(resolver: "OndemandRequestResolver@stats")

  # Partner
  partners(type: String): [Partner] @all(scopes: ["ofType"])

  # Partner Driver
  partnerNotAssignedDrivers(partner_id: ID!, searchFor: String, searchQuery: String): [Driver] 
    @paginate(scopes: ["notAssigned", "search"])

  # Zone
  zones(type: String! @eq): [Zone] @all
  zone(id: ID! @eq): Zone @findOrFail

  # To School
  allSchools(searchFor: String, searchQuery: String): [School] 
    @paginate(scopes: ["search"])
  school(id: ID! @eq): School @find
  schoolGrades(school_id: ID! @eq): [SchoolGrade] @all
  schoolGrade(id: ID! @eq): SchoolGrade @find
  schoolRequests(searchFor: String, searchQuery: String, zone_id: [ID], period: String, status: String!): [SchoolRequest] 
    @paginate(scopes: ["status", "period", "search"])
  schoolRequestsArchive(searchFor: String, searchQuery: String, period: String): [SchoolRequest] 
    @paginate(scopes: ["archived", "period", "search"])

  # To Workplace
  allWorkplaces(searchFor: String, searchQuery: String): [Workplace] 
    @paginate(scopes: ["search"])
  workplace(id: ID! @eq): Workplace @find
  workRequests(searchFor: String, searchQuery: String, zone_id: [ID], period: String, status: String!): [WorkRequest] 
    @paginate(scopes: ["status", "period", "search"])
  workRequestsArchive(searchFor: String, searchQuery: String, period: String): [WorkRequest] 
    @paginate(scopes: ["archived", "period", "search"])
}

# Partner Guard
extend type Query @guard(with: ["partner"]) {
  # Authenticated Partner
  authPartner: Partner @auth
}

# User Guard
extend type Query @guard(with: ["user"]) {
  # Authenticated User
  authUser: User @auth
}

# Driver Guard
extend type Query @guard(with: ["driver"]) {
  # Authenticated Driver
  authDriver: Driver @auth
}

# Admin|Partner Guard
extend type Query @guard(with: ["admin", "partner"]) {
  # User
  partnerUsers(partner_id: ID!, searchFor: String, searchQuery: String, assigned: Boolean): [User] 
    @paginate(scopes: ["assignedOrNot", "search"])

  # Partner
  partner(id: ID @eq): Partner @findOrFail

  # Partner Driver 
  partnerAssignedDrivers(partner_id: ID!): [Driver] 
    @all(scopes: ["assigned"])

  # Driver Vehicle
  driverAssignedVehicles(driver_id: ID!): [Vehicle] 
    @all(scopes: ["assigned"])
  driverNotAssignedVehicles(partner_id: ID, driver_id: ID!, searchFor: String, searchQuery: String): [Vehicle] 
    @paginate(scopes: ["notAssigned", "partner", "search"])

  # Vehicle
  vehicles(partner_id: ID, searchFor: String, searchQuery: String): [Vehicle] 
    @paginate(scopes: ["search", "partner"])
  vehiclesHaveTerminals(partner_id: ID): [Vehicle] @all(scopes: ["partner", "haveTerminal"])
  vehicle(id: ID @eq): Vehicle @findOrFail

  # Car Make
  carMakes: [CarMake] @all
  carMake(id: ID @eq): CarMake @find

  # Car Model
  carModels: [CarModel] @all
  carModel(id: ID @eq): CarModel @find
  carMakeModels(make_id: ID @eq): [CarModel] @all

  # Car Type
  carType(id: ID @eq): CarType @find

  # Business Trip
  businessTrips(type: String, partner_id: ID, searchFor: String, searchQuery: String): [BusinessTrip] 
    @paginate(scopes: ["partner", "ofType", "search"]) @softDeletes
  partnerBusinessTrips(partner_id: ID! @eq): [BusinessTrip] @all
  liveBusinessTrips(type: String, partner_id: ID): [BusinessTrip] 
    @all(scopes: ["live", "partner", "ofType"])
  unreadyBusinessTrips(type: String, partner_id: ID): [BusinessTrip] 
    @all(scopes: ["unReady", "partner", "ofType"])

  # Business Trip Station User
  businessTripStationUsers(trip_id: ID!, station_id: ID!, status: String!): [User] 
    @field(resolver: "BusinessTripSubscriptionResolver@businessTripStationUsers")

  # Business Trip User
  businessTripSubscribedUsers(trip_id: ID!): [BusinessTripSubbedUser] 
    @field(resolver: "BusinessTripSubscriptionResolver@businessTripSubscribedUsers")
  businessTripUnsubscribedUsers(trip_id: ID!, partner_id: ID, searchFor: String, searchQuery: String): 
    [User] @paginate(scopes: ["unsubscribed", "search"])

  # Business Trip Event
  businessTripEvents(type: String, searchFor: String, searchQuery: String, partner_id: ID, trip_id: ID, period: String): [BusinessTripEvent]
    @paginate(builder: "App\\GraphQL\\Queries\\BusinessTripEventResolver@index")

  # Business Trip Transaction
  businessTripAppTransactions(type: String, partner_id: ID, trip_id: ID, searchFor: String, searchQuery: String, period: String): [BusinessTripAppTransaction]
    @paginate(scopes: ["ofType", "partner", "trip", "period", "search"])

  # Seats Trip
  seatsTrips(partner_id: ID, searchFor: String, searchQuery: String): [SeatsTrip] 
    @paginate(scopes: ["partner", "search"])
  liveSeatsTrips(partner_id: ID): [SeatsTrip] 
    @all(scopes: ["live", "partner"])
  unreadySeatsTrips(partner_id: ID): [SeatsTrip] 
    @all(scopes: ["unReady", "partner"])
  
  # Seats Trip Event
  seatsTripEvents(searchFor: String, searchQuery: String, partner_id: ID, trip_id: ID, period: String): [SeatsTripEvent] @paginate(scopes: ["trip", "partner", "search", "filter"])

  # Seats Lines
  seatsLines(partner_id: ID, searchFor: String, searchQuery: String): [SeatsLine] 
    @paginate(scopes: ["partner", "search"])
  seatsLine(id: ID! @eq): SeatsLine @findOrFail
  seatsLineStations(line_id: ID! @eq): [SeatsLineStation] @all
  partnerSeatsLines(partner_id: ID! @eq): [SeatsLine] @all

  # Seats Trip Transaction
  seatsTripAppTransactions(partner_id: ID, trip_id: ID, searchFor: String, searchQuery: String, period: String): [SeatsTripAppTransaction]
    @paginate(scopes: ["partner", "trip", "period", "search"])
  seatsTripTerminalTransactions(partner_id: ID, terminal_id: ID, period: String, searchFor: String, searchQuery: String): [SeatsTripTerminalTransaction]
    @paginate(scopes: ["partner", "terminal", "period", "search"])
  seatsTripAppTransactionsStats(partner_id: ID, period: String): SeatsTripTransactionStats
    @field(resolver: "SeatsTripAppTransactionResolver@stats")
  seatsTripTerminalTransactionsStats(partner_id: ID, terminal_id: ID, period: String): SeatsTripTransactionStats
    @field(resolver: "SeatsTripTerminalTransactionResolver@stats")
  seatsTripTerminalTransactionsVehiclesStats(partner_id: ID, period: String): [SeatsTripTransactionVehiclesStats]
    @field(resolver: "SeatsTripTerminalTransactionResolver@vehiclesStats")
  seatsTripTerminalTransactionsTimeStats(partner_id: ID, terminal_id: ID, period: String): [SeatsTripTransactionTimeStats]
    @field(resolver: "SeatsTripTerminalTransactionResolver@timeStats")

  # Seats Trip Booking
  seatsTripBookings(partner_id: ID, trip_id: ID, searchFor: String, searchQuery: String, period: String, status: String): [SeatsTripBooking]
    @paginate(scopes: ["partner", "trip", "period", "status", "search"])

  # Document
  documents(documentable_id: ID!, documentable_type: String!): [Document]
    @field(resolver: "DocumentResolver")

  # Terminal
  terminals(partner_id: ID): [Terminal] @all(scopes: ["partner"])

  # Supervisor
  supervisors(partner_id: ID): [Supervisor] @all(scopes: ["partner"])
  supervisor(id: ID @eq): Supervisor @find 
}

# Admin|User Guard
extend type Query @guard(with: ["admin", "user"]) {
  # Ondemand Request
  userOndemandRequests(user_id: ID! @eq): [OndemandRequest] @all
  ondemandRequest(id: ID, nav: Boolean): OndemandRequest 
    @field(resolver: "OndemandRequestResolver")

  # School Request
  schools(zone_id: ID, city_id: ID): [School] @all(scopes: ["zone", "city"])
  schoolRequest(id: ID! @eq): SchoolRequest @find
  userSchoolRequests(user_id: ID! @eq): [SchoolRequest] @all

  # Workplace Request
  workplaces(zone_id: ID, city_id: ID): [Workplace] @all(scopes: ["zone", "city"])
  workRequest(id: ID! @eq): WorkRequest @find
  userWorkRequests(user_id: ID! @eq): [WorkRequest] @all

  # City
  cities: [City] @all

  # Statement
  statement(type: String! @eq): Statement @find
}

# Admin|Partner|User Guard
extend type Query @guard(with: ["admin", "partner", "user"]) {
  # Promo Code
  promoCodes(type: String, is_valid: Boolean): [PromoCode] @all(scopes: ["ofType", "isValid"])
  promoCode(name: String! @eq): PromoCode @find

  # Price Package
  pricePackages(city_id: ID, type: String, is_public: Boolean): [PricePackage] 
    @all(scopes: ["city", "ofType", "isPublic"])

  # Car Type
  carTypes(is_public: Boolean): [CarType] @all(scopes: ["isPublic"])

  # Vehicle Model
  vehicleTypeModels(type_id: ID!, is_public: Boolean): [CarModel]
    @field(resolver: "VehicleResolver@typeModels")

  # User
  userBusinessTripHistory(user_id: ID!): [BusinessTripEvent]
    @paginate(builder: "App\\GraphQL\\Queries\\BusinessTripResolver@userHistory", type: SIMPLE, defaultCount: 10)
  userLiveBusinessTrips(user_id: ID!): [BusinessTrip]
    @field(resolver: "BusinessTripResolver@userLiveTrips")
  userBusinessTripSubscriptions(user_id: ID!): [BusinessTrip]
    @field(resolver: "BusinessTripResolver@userSubscriptions")
  userBusinessTripSchedule(user_id: ID!, day: String!): [BusinessTrip]
    @field(resolver: "BusinessTripResolver@userTrips")
  user(id: ID @eq): User @find
  userLiveSeatsTrips(user_id: ID!): [SeatsTrip]
    @field(resolver: "SeatsTripResolver@userLiveTrips")

  # Business Trip
  businessTripSubscription(id: ID! @eq): BusinessTripSubscription @find
  businessTripSchedule(trip_id: ID!, user_id: ID!): BusinessTripSchedule
    @field(resolver: "BusinessTripScheduleResolver")

  # Seats Trip
  seatsNearbyStations(plat: String!, plng: String!, dlat: String!, dlng: String!, day: String!): 
    [SeatsNearbyStation] 
    @paginate(builder: "App\\GraphQL\\Queries\\SeatsLineStationResolver@nearby", type: SIMPLE, defaultCount: 10)
    @cache(maxAge: 300)
  seatsTripBooking(id: ID! @eq): SeatsTripBooking @find
  userSeatsTripBookings(user_id: ID! @eq, time: String!): [SeatsTripBooking] 
    @paginate(scopes: ["pickupTime"] type: SIMPLE, defaultCount: 10)
  preSeatsTripBooking(pickup_id: ID!, dropoff_id: ID!): PreSeatsTripBooking
    @field(resolver: "SeatsTripBookingResolver@pre")

  # User Transaction
  userTransactions(user_id: ID! @eq): [UserTransaction] @all

  # Business Trip Rating
  businessTripRatings(log_id: String! @eq): [BusinessTripRating] @all
  unratedBusinessTrips(user_id: ID!): [BusinessTrip] 
    @all(scopes: ["unrated"], model: "BusinessTripRating")

  # Seats Trip Rating
  seatsTripRatings(log_id: String! @eq): [SeatsTripRating] @all
  unratedSeatsTrips(user_id: ID!): [SeatsTrip] 
    @all(scopes: ["unrated"], model: "SeatsTripRating")
}

# Admin|Partner|Driver Guard
extend type Query @guard(with: ["admin", "partner", "driver"]) {
  # Business Trip Attendance
  businessTripAttendance(trip_id: ID!, date: String): [BusinessTripAttendance]
    @field(resolver: "BusinessTripAttendanceResolver")

  # Driver
  driver(id: ID @eq): Driver @findOrFail
  driverLiveBusinessTrips(driver_id: ID!): [BusinessTrip]
    @field(resolver: "BusinessTripResolver@driverLiveTrips")
  driverBusinessTripSchedule(driver_id: ID!, day: String!): [BusinessTrip]
    @field(resolver: "BusinessTripResolver@driverTrips")
  driverBusinessTrips(driver_id: ID! @eq): [BusinessTrip] @all
  driverSeatsTrips(driver_id: ID! @eq): [SeatsTrip] @all
  driverLiveSeatsTrips(driver_id: ID!): [SeatsTrip]
    @field(resolver: "SeatsTripResolver@driverLiveTrips")
  driverSeatsTripSchedule(driver_id: ID!, day: String!): [SeatsTrip]
    @field(resolver: "SeatsTripResolver@driverTrips")
}

# Admin|Partner|User|Driver Guard
extend type Query @guard(with: ["admin", "partner", "user", "driver"]) {
  # Business Trip
  businessTrip(id: ID @eq): BusinessTrip @findOrFail

  # Business Trip Station
  businessTripStations(trip_id: ID! @eq): [BusinessTripStation] @all

  # Business Trip Event
  businessTripUserStatus(trip_id: ID!, user_id: ID!): User 
    @field(resolver: "BusinessTripSubscriptionResolver@businessTripUserStatus")
  businessTripUsersStatus(trip_id: ID, station_id: ID): [User]
    @field(resolver: "BusinessTripSubscriptionResolver@businessTripUsersStatus")
  businessTripSubscribers(trip_id: ID!, status: String!, station_id: ID): [User]
    @field(resolver: "BusinessTripSubscriptionResolver@businessTripSubscribers")

  # Seats Trip
  seatsTrip(id: ID @eq): SeatsTrip @findOrFail
  seatsTripUsers(trip_id: ID!, trip_time: String!, status: String!, station_id: ID): 
    [SeatsTripBookedUser] @field(resolver: "SeatsTripUserResolver")
  seatsTripAppTransactionsDetail(trip_id: ID! @eq, trip_time: String! @eq): [SeatsTripAppTransaction] @all

  # Communication
  businessTripChatMessages(log_id: String!, user_id: ID, is_private: Boolean): [BusinessTripChat] 
    @field(resolver: "CommunicationResolver@businessTripChatMessages")
  businessTripPrivateChatUsers(log_id: String!): [User]
    @field(resolver: "CommunicationResolver@businessTripPrivateChatUsers")
}

#import auth.graphql
#import role.graphql
#import admin.graphql
#import user.graphql
#import partner.graphql
#import fleet.graphql 
#import driver.graphql
#import vehicle.graphql
#import carType.graphql
#import carMake.graphql
#import carModel.graphql
#import communication.graphql
#import document.graphql
#import promoCode.graphql
#import ondemandRequest.graphql
#import school.graphql
#import city.graphql
#import pricePackage.graphql
#import statement.graphql
#import zone.graphql
#import workplace.graphql
#import utilities.graphql
#import businessTrip.graphql
#import businessTripStation.graphql
#import businessTripSubscription.graphql
#import businessTripSchedule.graphql
#import businessTripAttendance.graphql
#import businessTripRequest.graphql
#import businessTripTransaction.graphql
#import seatsTrip.graphql
#import seatsLine.graphql
#import seatsLineStation.graphql
#import seatsTripBooking.graphql
#import seatsTripTransaction.graphql
#import tripEvent.graphql
#import businessTripEvent.graphql
#import seatsTripEvent.graphql
#import terminal.graphql
#import userTransaction.graphql
#import supervisor.graphql
#import businessTripRating.graphql
#import seatsTripRating.graphql